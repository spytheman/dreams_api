import{s as U,n as X,e as q,o as M,r as ve}from"../chunks/scheduler.e108d1fd.js";import{S as j,i as B,g as k,s as V,m as N,H as ee,h as $,j as y,c as C,f as m,n as P,C as te,k as v,a as S,y as g,A as L,o as H,B as Y,r as G,u as R,v as z,d as J,t as O,w as W,e as le,z as se,x as _e}from"../chunks/index.3aeff6f3.js";import{w as me,r as ge,c as K,a as Q,b as pe}from"../chunks/stores.65371aae.js";import{e as A}from"../chunks/each.e59479a4.js";function re(r,e,t){const l=r.slice();return l[10]=e[t],l[12]=t,l}function ae(r){let e,t,l,a=r[10]+"",n;return{c(){e=k("label"),t=k("input"),n=N(a),this.h()},l(s){e=$(s,"LABEL",{for:!0});var o=y(e);t=$(o,"INPUT",{type:!0,id:!0,name:!0}),n=P(o,a),o.forEach(m),this.h()},h(){v(t,"type","checkbox"),t.value=l=r[10],v(t,"id",`id_${r[12]}`),v(t,"name","test_srv_list"),v(e,"for",`id_${r[12]}`)},m(s,o){S(s,e,o),g(e,t),g(e,n)},p(s,o){o&2&&l!==(l=s[10])&&(t.value=l),o&2&&a!==(a=s[10]+"")&&H(n,a)},d(s){s&&m(e)}}}function be(r){let e,t,l,a,n,s,o,h,p,d,i,u,c,f,_,b=A(r[1]),w=[];for(let E=0;E<b.length;E+=1)w[E]=ae(re(r,b,E));return{c(){e=k("div"),t=k("div"),l=k("input"),a=V();for(let E=0;E<w.length;E+=1)w[E].c();n=V(),s=k("div"),o=N(r[0]),h=V(),p=k("div"),d=new ee(!1),i=V(),u=k("div"),c=new ee(!1),this.h()},l(E){e=$(E,"DIV",{class:!0});var D=y(e);t=$(D,"DIV",{class:!0});var I=y(t);l=$(I,"INPUT",{type:!0,class:!0}),a=C(I);for(let F=0;F<w.length;F+=1)w[F].l(I);I.forEach(m),n=C(D),s=$(D,"DIV",{class:!0});var T=y(s);o=P(T,r[0]),T.forEach(m),h=C(D),p=$(D,"DIV",{class:!0});var Z=y(p);d=te(Z,!1),Z.forEach(m),i=C(D),u=$(D,"DIV",{class:!0});var x=y(u);c=te(x,!1),x.forEach(m),D.forEach(m),this.h()},h(){v(l,"type","button"),l.value="SEND",v(l,"class","border pl-2 pr-2 mr-5 bg-blue-600 text-white rounded-md"),v(t,"class","w-full bg-white border-2 border-b-black h-fit sticky top-0"),v(s,"class","border w-full h-[24vh] overflow-y-scroll p-1"),d.a=null,v(p,"class","border w-[54vw] h-[34vh] overflow-y-scroll p-1"),c.a=null,v(u,"class","border w-[54vw] h-[34vh] overflow-y-scroll p-1"),v(e,"class","flex flex-col justify-evenly border w-[54vw] h-[74vh] p-1")},m(E,D){S(E,e,D),g(e,t),g(t,l),g(t,a);for(let I=0;I<w.length;I+=1)w[I]&&w[I].m(t,null);g(e,n),g(e,s),g(s,o),g(e,h),g(e,p),d.m(r[2],p),g(e,i),g(e,u),c.m(r[3],u),f||(_=L(l,"click",r[4]),f=!0)},p(E,[D]){if(D&2){b=A(E[1]);let I;for(I=0;I<b.length;I+=1){const T=re(E,b,I);w[I]?w[I].p(T,D):(w[I]=ae(T),w[I].c(),w[I].m(t,null))}for(;I<w.length;I+=1)w[I].d(1);w.length=b.length}D&1&&H(o,E[0]),D&4&&d.p(E[2]),D&8&&c.p(E[3])},i:X,o:X,d(E){E&&m(e),Y(w,E),f=!1,_()}}}function we(r,e,t){let l,a,n,s;q(r,me,c=>t(6,l=c)),q(r,ge,c=>t(1,a=c)),q(r,K,c=>t(2,n=c)),q(r,Q,c=>t(3,s=c));let{msg:o}=e,h=[];const p=async()=>{if(K.set(""),Q.set(""),h=d(),o.length<=1){alert("Api message can not be send with nothing, Select the api to be tested and enter the correct test data.");return}if(h.length==0){alert("The IP address of the server to be tested cannot be empty. Select at least one of the server IP addresses to send test information.");return}i(h,o)},d=()=>{let c=[],f=document.getElementsByName("test_srv_list");for(let _=0;_<f.length;_++){let b=f[_];b.checked&&c.push(b.value)}return console.log(c),c},i=(c,f)=>{let _=new WebSocket(`${l}`);_.onopen=function(b){console.log("[open] Connection established"),console.log("Sending to server"),console.log(`${c.toString()}>${f}`),_.send(`${c.toString()}>${f}`)},_.onmessage=function(b){console.log(`[message] Data received from server: ${b.data}`),u(b.data)},_.onerror=function(b){console.log(`[error]${JSON.stringify(b,null,4)}`)}},u=c=>{c.includes("10.162.138.83")?Q.update(f=>c):K.update(f=>c)};return M(()=>{console.log("msg:",o,o.length)}),r.$$set=c=>{"msg"in c&&t(0,o=c.msg)},[o,a,n,s,p]}class ke extends j{constructor(e){super(),B(this,e,we,be,U,{msg:0})}}function ne(r,e,t){const l=r.slice();return l[4]=e[t],l[5]=e,l[6]=t,l}function ie(r){let e,t=(r[0].api_content===""?"":r[0].api_content)+"",l,a;return{c(){e=k("div"),l=N(t),this.h()},l(n){e=$(n,"DIV",{class:!0});var s=y(e);l=P(s,t),s.forEach(m),this.h()},h(){v(e,"class",a=r[0].api_content===""?"":"w-full bg-blue-500 p-0.5 text-sm text-red-100 rounded-md overflow-x-scroll")},m(n,s){S(n,e,s),g(e,l)},p(n,s){s&1&&t!==(t=(n[0].api_content===""?"":n[0].api_content)+"")&&H(l,t),s&1&&a!==(a=n[0].api_content===""?"":"w-full bg-blue-500 p-0.5 text-sm text-red-100 rounded-md overflow-x-scroll")&&v(e,"class",a)},d(n){n&&m(e)}}}function oe(r){let e,t=A(r[0].api_param),l=[];for(let a=0;a<t.length;a+=1)l[a]=ue(ne(r,t,a));return{c(){for(let a=0;a<l.length;a+=1)l[a].c();e=le()},l(a){for(let n=0;n<l.length;n+=1)l[n].l(a);e=le()},m(a,n){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(a,n);S(a,e,n)},p(a,n){if(n&1){t=A(a[0].api_param);let s;for(s=0;s<t.length;s+=1){const o=ne(a,t,s);l[s]?l[s].p(o,n):(l[s]=ue(o),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(a){a&&m(e),Y(l,a)}}}function ue(r){let e,t,l=r[4].key+"",a,n,s,o,h,p,d,i,u,c;function f(){r[2].call(s,r[5],r[6])}function _(){return r[3](r[4],r[5],r[6])}return{c(){e=k("div"),t=k("label"),a=N(l),n=N("="),s=k("input"),i=V(),this.h()},l(b){e=$(b,"DIV",{class:!0});var w=y(e);t=$(w,"LABEL",{for:!0,class:!0});var E=y(t);a=P(E,l),n=P(E,"="),s=$(E,"INPUT",{type:!0,name:!0,id:!0,class:!0}),E.forEach(m),i=C(w),w.forEach(m),this.h()},h(){v(s,"type","text"),v(s,"name",o=r[4].key),v(s,"id",h=r[4].key),s.required=p=r[4].is_required,v(s,"class","w-[24vw] border float-right text-left text-slate-600 bg-slate-300"),v(t,"for",d=r[4].key),v(t,"class","w-[10vw]"),v(e,"class","border")},m(b,w){S(b,e,w),g(e,t),g(t,a),g(t,n),g(t,s),se(s,r[4].value),g(e,i),u||(c=[L(s,"input",f),L(s,"change",_)],u=!0)},p(b,w){r=b,w&1&&l!==(l=r[4].key+"")&&H(a,l),w&1&&o!==(o=r[4].key)&&v(s,"name",o),w&1&&h!==(h=r[4].key)&&v(s,"id",h),w&1&&p!==(p=r[4].is_required)&&(s.required=p),w&1&&s.value!==r[4].value&&se(s,r[4].value),w&1&&d!==(d=r[4].key)&&v(t,"for",d)},d(b){b&&m(e),u=!1,ve(c)}}}function $e(r){let e,t,l,a,n,s,o,h,p=r[0]!=null&&ie(r),d=r[0]!=null&&oe(r);return o=new ke({props:{msg:r[1]}}),{c(){e=k("div"),p&&p.c(),t=V(),l=k("div"),a=k("div"),n=k("div"),d&&d.c(),s=V(),G(o.$$.fragment),this.h()},l(i){e=$(i,"DIV",{class:!0});var u=y(e);p&&p.l(u),u.forEach(m),t=C(i),l=$(i,"DIV",{class:!0});var c=y(l);a=$(c,"DIV",{class:!0});var f=y(a);n=$(f,"DIV",{class:!0});var _=y(n);d&&d.l(_),_.forEach(m),s=C(f),R(o.$$.fragment,f),f.forEach(m),c.forEach(m),this.h()},h(){v(e,"class","border-2 bg-white h-[7vh] w-full p-1 flex items-center"),v(n,"class","border w-[35vw] h-[74vh] p-1"),v(a,"class","flex flex-row justify-start"),v(l,"class","bg-white h-[74vh] p-1")},m(i,u){S(i,e,u),p&&p.m(e,null),S(i,t,u),S(i,l,u),g(l,a),g(a,n),d&&d.m(n,null),g(a,s),z(o,a,null),h=!0},p(i,[u]){i[0]!=null?p?p.p(i,u):(p=ie(i),p.c(),p.m(e,null)):p&&(p.d(1),p=null),i[0]!=null?d?d.p(i,u):(d=oe(i),d.c(),d.m(n,null)):d&&(d.d(1),d=null);const c={};u&2&&(c.msg=i[1]),o.$set(c)},i(i){h||(J(o.$$.fragment,i),h=!0)},o(i){O(o.$$.fragment,i),h=!1},d(i){i&&(m(e),m(t),m(l)),p&&p.d(),d&&d.d(),W(o)}}}function Ee(r,e,t){let{api:l}=e,a="";function n(o,h){o[h].value=this.value,t(0,l)}const s=(o,h,p)=>t(0,h[p].value=o.value.toUpperCase(),l);return r.$$set=o=>{"api"in o&&t(0,l=o.api)},r.$$.update=()=>{if(r.$$.dirty&1){let o="";l!=null&&l.api_param.forEach(h=>{o+=`${h.key}=${h.value.includes(" ")&&h.key!="HDR"?`"${h.value.toUpperCase()}" `:`${h.value.toUpperCase()} `} `}),t(1,a=`${l==null?void 0:l.api_name} ${o}`)}},[l,a,n,s]}class Ie extends j{constructor(e){super(),B(this,e,Ee,$e,U,{api:0})}}function ce(r,e,t){const l=r.slice();return l[1]=e[t],l}function fe(r){let e,t,l,a,n;return{c(){e=k("input"),this.h()},l(s){e=$(s,"INPUT",{type:!0,class:!0}),this.h()},h(){v(e,"type","button"),e.value=t=r[1].api_name,v(e,"class",l="border "+(r[1].is_inuse=="Y"?"bg-green-400":"bg-red-400 ")+" p-1 m-1 text-sm text-yellow-50 hover:bg-blue-500 active:bg-blue-500 focus:bg-blue-500 rounded-md")},m(s,o){S(s,e,o),a||(n=L(e,"click",r[2]),a=!0)},p(s,o){o&1&&t!==(t=s[1].api_name)&&(e.value=t),o&1&&l!==(l="border "+(s[1].is_inuse=="Y"?"bg-green-400":"bg-red-400 ")+" p-1 m-1 text-sm text-yellow-50 hover:bg-blue-500 active:bg-blue-500 focus:bg-blue-500 rounded-md")&&v(e,"class",l)},d(s){s&&m(e),a=!1,n()}}}function ye(r){let e,t,l="API LIST:",a,n,s,o,h,p=A(r[0]),d=[];for(let i=0;i<p.length;i+=1)d[i]=fe(ce(r,p,i));return o=new Ie({props:{api:r[1]}}),{c(){e=k("div"),t=k("span"),t.textContent=l,a=V(),n=k("div");for(let i=0;i<d.length;i+=1)d[i].c();s=V(),G(o.$$.fragment),this.h()},l(i){e=$(i,"DIV",{class:!0});var u=y(e);t=$(u,"SPAN",{class:!0,"data-svelte-h":!0}),_e(t)!=="svelte-1j6fakd"&&(t.textContent=l),a=C(u),n=$(u,"DIV",{class:!0});var c=y(n);for(let f=0;f<d.length;f+=1)d[f].l(c);c.forEach(m),u.forEach(m),s=C(i),R(o.$$.fragment,i),this.h()},h(){v(t,"class","border border-t-0 border-l-0 border-r-0"),v(n,"class","h-[12vh] w-full float-left overflow-y-scroll scroll-auto"),v(e,"class","border bg-white h-[15vh] p-1")},m(i,u){S(i,e,u),g(e,t),g(e,a),g(e,n);for(let c=0;c<d.length;c+=1)d[c]&&d[c].m(n,null);S(i,s,u),z(o,i,u),h=!0},p(i,[u]){if(u&5){p=A(i[0]);let f;for(f=0;f<p.length;f+=1){const _=ce(i,p,f);d[f]?d[f].p(_,u):(d[f]=fe(_),d[f].c(),d[f].m(n,null))}for(;f<d.length;f+=1)d[f].d(1);d.length=p.length}const c={};u&2&&(c.api=i[1]),o.$set(c)},i(i){h||(J(o.$$.fragment,i),h=!0)},o(i){O(o.$$.fragment,i),h=!1},d(i){i&&(m(e),m(s)),Y(d,i),W(o,i)}}}function De(r,e,t){let{api_list:l=[]}=e,a={id:0,srv_id:0,api_name:"",api_content:"",api_param:[],test_count:0,is_inuse:"Y"};M(()=>{console.log(l)});const n=s=>{s.preventDefault();const o=s.target.getAttribute("value");t(1,a=l.find(h=>h.api_name===o)),console.log(a)};return r.$$set=s=>{"api_list"in s&&t(0,l=s.api_list)},[l,a,n]}class Se extends j{constructor(e){super(),B(this,e,De,ye,U,{api_list:0})}}function de(r,e,t){const l=r.slice();return l[4]=e[t],l}function he(r){let e,t,l,a,n,s,o,h=r[4].srv_name+"",p,d,i,u,c;return{c(){e=k("label"),t=k("input"),o=V(),p=N(h),d=V(),this.h()},l(f){e=$(f,"LABEL",{for:!0});var _=y(e);t=$(_,"INPUT",{type:!0,name:!0,id:!0,"data-srv_id":!0,class:!0}),o=C(_),p=P(_,h),d=C(_),_.forEach(m),this.h()},h(){v(t,"type","radio"),v(t,"name","srvlist"),v(t,"id",l=r[4].id),t.value=a=r[4].srv_name,t.checked=n=r[4].id=="1",v(t,"data-srv_id",s=r[4].id),v(t,"class","border text-left w-auto p-0.5 hover:text-white hover:bg-red-500 focus:bg-red-600 focus:text-white rounded-sm"),v(e,"for",i=r[4].id)},m(f,_){S(f,e,_),g(e,t),g(e,o),g(e,p),g(e,d),u||(c=L(t,"click",r[2]),u=!0)},p(f,_){_&1&&l!==(l=f[4].id)&&v(t,"id",l),_&1&&a!==(a=f[4].srv_name)&&(t.value=a),_&1&&n!==(n=f[4].id=="1")&&(t.checked=n),_&1&&s!==(s=f[4].id)&&v(t,"data-srv_id",s),_&1&&h!==(h=f[4].srv_name+"")&&H(p,h),_&1&&i!==(i=f[4].id)&&v(e,"for",i)},d(f){f&&m(e),u=!1,c()}}}function Ve(r){let e,t,l="SRV LIST:",a,n,s,o,h,p,d=A(r[0]),i=[];for(let u=0;u<d.length;u+=1)i[u]=he(de(r,d,u));return h=new Se({props:{api_list:r[1].api_list}}),{c(){e=k("div"),t=k("span"),t.textContent=l,a=V(),n=k("div");for(let u=0;u<i.length;u+=1)i[u].c();s=V(),o=k("div"),G(h.$$.fragment),this.h()},l(u){e=$(u,"DIV",{class:!0});var c=y(e);t=$(c,"SPAN",{class:!0,"data-svelte-h":!0}),_e(t)!=="svelte-11uywqa"&&(t.textContent=l),a=C(c),n=$(c,"DIV",{class:!0});var f=y(n);for(let b=0;b<i.length;b+=1)i[b].l(f);f.forEach(m),c.forEach(m),s=C(u),o=$(u,"DIV",{class:!0});var _=y(o);R(h.$$.fragment,_),_.forEach(m),this.h()},h(){v(t,"class","border-t-0 border-l-0 border-r-0 border"),v(n,"class","flex flex-col"),v(e,"class","border w-[12vw] p-1"),v(o,"class","border w-[90vw] ml-1")},m(u,c){S(u,e,c),g(e,t),g(e,a),g(e,n);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(n,null);S(u,s,c),S(u,o,c),z(h,o,null),p=!0},p(u,[c]){if(c&5){d=A(u[0]);let _;for(_=0;_<d.length;_+=1){const b=de(u,d,_);i[_]?i[_].p(b,c):(i[_]=he(b),i[_].c(),i[_].m(n,null))}for(;_<i.length;_+=1)i[_].d(1);i.length=d.length}const f={};c&2&&(f.api_list=u[1].api_list),h.$set(f)},i(u){p||(J(h.$$.fragment,u),p=!0)},o(u){O(h.$$.fragment,u),p=!1},d(u){u&&(m(e),m(s),m(o)),Y(i,u),W(h)}}}function Ce(r,e,t){let l;q(r,pe,o=>t(3,l=o));let a=[],n={id:"",srv_name:"",default_hdr:"",api_list:[]};return M(async()=>{const h=await(await fetch(`${l}/api/srv/list`,{method:"GET"})).json();t(0,a=h),console.log(a),t(1,n=a[0])}),[a,n,o=>{let h=o.target.dataset.srv_id;t(1,n=a[h-1])}]}class Ae extends j{constructor(e){super(),B(this,e,Ce,Ve,U,{})}}function qe(r){let e,t,l;return t=new Ae({}),{c(){e=k("div"),G(t.$$.fragment),this.h()},l(a){e=$(a,"DIV",{class:!0});var n=y(e);R(t.$$.fragment,n),n.forEach(m),this.h()},h(){v(e,"class","flex flex-row justify-start border w-full h-screen p-1")},m(a,n){S(a,e,n),z(t,e,null),l=!0},p:X,i(a){l||(J(t.$$.fragment,a),l=!0)},o(a){O(t.$$.fragment,a),l=!1},d(a){a&&m(e),W(t)}}}function Ne(r,e,t){let l;q(r,pe,n=>t(1,l=n));let a="";return M(async()=>{a=await(await fetch(`${l}/api/test/hello`,{method:"GET"})).json(),console.log(a)}),[]}class je extends j{constructor(e){super(),B(this,e,Ne,qe,U,{})}}export{je as component};
